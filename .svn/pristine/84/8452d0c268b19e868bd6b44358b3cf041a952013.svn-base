
<html>
<title>Конфигурирование отчётов</title>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=windows-1251">
<meta>
  <link href="../../style.css" type=text/css rel=styleSheet>
</meta>
</head>

<body>
<TABLE  width="100%">
<TR>
<TD>

   <h2 align="center">Конфигурирование отчётов</h2>
   <hr>
   <br><br><br><br>

   <h3  align="center">Список отчётов</h3>
   Для конфигурирование/подключение отчётов, необходимо выбрать пункт меню: Отчёты -&gt; Список отчётов.
   После выполнения вышеуказанного действия будет отображена табличная форма представляющая весь список отчётов в системе.

   
   <br><br><br><br> 

   <table align="center">
    <tr>
      <td><img border=0 src="images/report-list.png"/></td>
    </tr>
   </table>


   <br><br><br><br> 
   <h3  align="center">Конфигурирование</h3>
   Для подключения нового отчёта необходимо в панели инструментов формы нажать кнопку <b>Добавить</b>, 
   для изменения конфигурации уже существующего отчёта - кнопку <b>Изменить</b>. 
   После выполнения вышеуказанного действия будет отображена форма для конфигурирования отчёта.
   
   <br><br><br><br>
   
   <table align="center">
    <tr>
      <td><img border=0 src="images/report-edit.png"/></td>
    </tr>
   </table>
<br><br><br><br>
  Обязательными атрибутами для ввода являются: <b>Код</b>, <b>Название</b> и <b>Имя файла</b>. 
  На данный момент система поддерживает отчёты в формате <b>JasperReports</b>. 
  При подключении нового отчёта необходимо указать файл шаблона (темплейта).
  Если отчёт требует для выполнения некоторые параметры, то необходимо выбрать соответствующий акцептор. 
  Акцептор отвечает за получение параметров из внешней среды.
  Частным случаем акцептора является диалоговое окно для установки параметров.
  В системе представлено несколько стандартных акцепторов:
  <br><br><br><br>
  <table border='1' align='center'>
   <tr>
     <td><b>Акцептор</b></td><td><b>Параметры</b></td><td><b>Вызов диалога</b></td>
   </tr>
   <tr>
     <td>OrganizationAcceptor</td>
     <td>ORGANIZATION_ID (ID организации, целое число)<br>
         ORGANIZATION_NAME (Название организации, строка)</td>
     <td align = 'center'>Нет</td>
   </tr>
   <tr>
     <td>OrganizationPeriodAcceptor</td>
     <td>ORGANIZATION_ID (ID организации, целое число)<br>
         ORGANIZATION_NAME (Название организации, строка)<br>
         PERIOD_ID (ID периода, целое число)<br>
         PERIOD_START_DATE (Начальная дата)<br>
	     PERIOD_END_DATE (Конечная дата)<br>
	     START_DAY_POS (Начальная дата в формате 'ггггммдд', целое число)<br>
	     END_DAY_POS (Конечнаядата в формате 'ггггммдд', целое число)<br>
     </td>
     <td align = 'center'>Нет</td>
   </tr>
   <tr>
     <td>OrganizationPeriodDialogAcceptor</td>
     <td>ORGANIZATION_ID (ID организации, целое число)<br>
         ORGANIZATION_NAME (Название организации, строка)<br>
         PERIOD_START_DATE (Начальная дата)<br>
	     PERIOD_END_DATE (Конечная дата)<br>
	     START_DAY_POS (Начальная дата в формате 'ггггммдд', целое число)<br>
	     END_DAY_POS (Конечнаядата в формате 'ггггммдд', целое число)<br>
     </td>
     <td align = 'center'>Да<br>Выбор диапазона дат</td>
   </tr>
   <tr>
     <td>OrganizationYearDialogAcceptor</td>
     <td>ORGANIZATION_ID (ID организации, целое число)<br>
         ORGANIZATION_NAME (Название организации, строка)<br>
	     YEAR (Год, целое число)<br>
     </td>
     <td align = 'center'>Да<br>Выбор года</td>
   </tr>
   <tr>
     <td>OrganizationBankAccountDialogAcceptor</td>
     <td>PARTNER_ID (ID партнёра, целое число)<br>
         PARTNER_NAME (Название партнёра, строка)<br>
         BANK_ACCOUNT_ID (ID банковского счёта, целое число) <br>
    	 BANK_ACCOUNT_NO (Номер банковского счёта, строка)<br>
     </td>
     <td align = 'center'>Да<br>Выбор партнёра <br>и банковского счёта</td>
   </tr>
   
  </table>
     
   <br><br><br><br>
   
   Если необходимо запускать отчёт из табличной формы-списка, то нужно указать соответствующую форму в атрибуте <b>Запуск из формы</b>.
   <br>В таком случае в отчёт будет автоматически передан идентификатор строчки таблицы в виде параметра <b>ID</b>. 
   Все вышеописанные параметры можно использовать в шаблоне <b>JasperReports</b> в формате <b>$P{<i>&ltPARAMETER&gt</i>}</b>, где <b><i>&ltPARAMETER&gt</i></b> - название параметра.
   <br><br>
   <b>Например:</b> 
   <code>
   SELECT * FROM document WHERE id = <b>$P{ID}</b>
   </code>
   
   <br><br>
   Если для выполнения отчёта достаточно только акцептора, то необходимо установить атрибут <b>Независимый</b>.
   Отчёты которые вызываются из табличных форм-списков в основном зависимы, 
   так как для них необходим ещё параметер идентификатор строчки таблицы <b>ID</b>.
</TD>
</TR>

</TABLE>

</body>
</html>


